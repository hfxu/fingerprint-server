spring:
  application:
    name: fingerprint-server
  elasticsearch:
    uris: ${ELASTIC_URIS:http://localhost:9200}
    username: ${ELASTIC_USERNAME:}
    password: ${ELASTIC_PASSWORD:}
  cache:
    type: simple
    cache-names: geoIpCache
    caffeine:
      spec: maximumSize=10000,expireAfterWrite=24h

server:
  port: ${SERVER_PORT:8080}

management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,env,loggers
  endpoint:
    health:
      show-details: when_authorized

logging:
  level:
    root: INFO
    com.fingerprint.server: DEBUG

springdoc:
  api-docs:
    enabled: true
  swagger-ui:
    enabled: true
    path: /swagger-ui.html

fingerprint:
  similarity:
    threshold: ${FINGERPRINT_SIMILARITY_THRESHOLD:0.95}
    visitor-weight: ${FINGERPRINT_WEIGHT_VISITOR:0.35}
    browser-weight: ${FINGERPRINT_WEIGHT_BROWSER:0.2}
    device-weight: ${FINGERPRINT_WEIGHT_DEVICE:0.2}
    network-weight: ${FINGERPRINT_WEIGHT_NETWORK:0.1}
    geo-weight: ${FINGERPRINT_WEIGHT_GEO:0.1}
    certificate-weight: ${FINGERPRINT_WEIGHT_CERT:0.05}
  elasticsearch:
    connect-timeout: ${FINGERPRINT_ES_CONNECT_TIMEOUT:3s}
    socket-timeout: ${FINGERPRINT_ES_SOCKET_TIMEOUT:30s}
    max-connections: ${FINGERPRINT_ES_MAX_CONNECTIONS:100}
    max-connections-per-route: ${FINGERPRINT_ES_MAX_CONN_ROUTE:50}
  geoip:
    enabled: ${FINGERPRINT_GEOIP_ENABLED:true}
    database-path: ${FINGERPRINT_GEOIP_DB_PATH:classpath:GeoLite2-City.mmdb}
    cache-size: ${FINGERPRINT_GEOIP_CACHE_SIZE:4096}
